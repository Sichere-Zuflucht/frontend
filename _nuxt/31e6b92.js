(window.webpackJsonp=window.webpackJsonp||[]).push([[44,22,30],{520:function(e,t,r){"use strict";r.r(t);var n={props:{url:{type:String,default:null},icon:{type:String,default:null},pos:{type:String,default:"center center"}}},l=r(73),o=r(74),c=r.n(o),d=r(194),v=r(164),f=r(59),component=Object(l.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.url?r("v-img",{attrs:{src:e.url,height:"300",position:e.pos}}):r("v-sheet",{attrs:{color:"secondary d-flex justify-center"}},[r("v-icon",{staticClass:"pa-12",attrs:{size:"60",color:"white"}},[e._v(e._s(e.icon))])],1)}),[],!1,null,null,null);t.default=component.exports;c()(component,{VIcon:d.a,VImg:v.a,VSheet:f.a})},586:function(e,t,r){"use strict";r.r(t);var n=r(5),l=(r(46),{name:"Settings",middleware:function(e){var t=e.store,r=e.redirect;if(!t.getters["modules/user/isAuthenticated"])return r("/")},data:function(){return{btn:{disabled:!1,loading:!1,success:!1},err:{status:!1,msg:""},overlay:!1,userProvidedPassword:null,deleteVal:!1,deleteLoading:!1,rules:{delete:[function(e){return!!e||"Passwort einfügen."}]}}},computed:{pubData:function(){return this.$store.getters["modules/user/public"]},privData:function(){return this.$store.getters["modules/user/private"]}},methods:{resetPassword:function(){var e=this;this.btn.loading=!0,this.$fire.auth.sendPasswordResetEmail(this.privData.email).then((function(){e.btn.loading=!1,e.btn.disabled=!0,e.btn.success=!0})).catch((function(t){e.err.status=!0,e.err.msg=t.code+": "+t.message}))},deleteUser:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.deleteLoading=!0,t.next=3,e.$fire.auth.signInWithEmailAndPassword(e.privData.email,e.userProvidedPassword).then(Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$fire.functions.httpsCallable("user-delete")(e.pubData.uid,e.privData.email);case 2:e.$router.go("/");case 3:case"end":return t.stop()}}),t)})))).catch((function(){e.err.status=!0,e.err.msg="Falsches Passwort eingegeben.",e.overlay=!1}));case 3:e.deleteLoading=!1;case 4:case"end":return t.stop()}}),t)})))()}}}),o=r(73),c=r(74),d=r.n(c),v=r(529),f=r(208),h=r(195),_=r(100),m=r(521),w=r(603),D=r(497),P=r(537),x=r(564),component=Object(o.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("UtilsBanner",{attrs:{icon:"mdi-account-cog-outline"}}),e._v(" "),e.pubData&&e.privData?r("v-container",[r("h1",{staticClass:"text-h1 primary--text mb-4"},[e._v("Einstellungen"),r("br"),e._v("einsehen")]),e._v(" "),r("small",[e._v("Name:")]),e._v(" "),r("p",[e._v("\n      "+e._s(e.pubData.firstName||e.privData.firstName)+"\n      "+e._s(e.pubData.lastName||e.privData.lastName)+"\n    ")]),e._v(" "),r("small",[e._v("NutzerID:")]),e._v(" "),r("p",[e._v(e._s(e.pubData.uid))]),e._v(" "),r("small",[e._v("E-Mail:")]),e._v(" "),r("p",[e._v(e._s(e.privData.email))]),e._v(" "),r("small",[e._v("Mitglied als:")]),e._v(" "),e.pubData.membership?r("p",[e._v(e._s(e.pubData.membership.name))]):e._e(),e._v(" "),r("v-btn",{attrs:{disabled:e.btn.disabled,loading:e.btn.loading,color:"secondary"},on:{click:e.resetPassword}},[e._v("Passwort ändern")]),e._v(" "),e.btn.success?r("v-alert",{attrs:{type:"success",color:"success"}},[e._v("Es wurde eine E-Mail an "+e._s(e.privData.email)+" geschickt. Bitte folgen\n      Sie den dort beschriebenen Anweisungen.")]):e._e(),e._v(" "),r("v-dialog",{attrs:{width:"300"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[r("v-btn",e._g({attrs:{color:"error",text:""}},n),[e._v("Account löschen")])]}}],null,!1,295990557),model:{value:e.overlay,callback:function(t){e.overlay=t},expression:"overlay"}},[e._v(" "),r("v-card",[r("v-card-title",[r("h2",{staticClass:"text-h2 error--text"},[e._v("Achtung")])]),e._v(" "),r("v-card-text",[r("p",[e._v("\n            Bist du dir sicher, dass du dein Profil löschen möchtest? Dieser\n            Vorgang ist nicht wieder Rückgängig zu machen. Alle deine Daten\n            werden unwiederuflich von unserer Datenbank gelöscht.\n          ")]),e._v(" "),r("p",[e._v("\n            Bitte fügen dein Passwort ein, wenn du dein Profil wirklich\n            löschen möchtest.\n          ")])]),e._v(" "),r("v-card-actions",[r("v-form",{ref:"deleteForm",on:{submit:function(t){return t.preventDefault(),e.deleteUser(t)}},model:{value:e.deleteVal,callback:function(t){e.deleteVal=t},expression:"deleteVal"}},[r("v-text-field",{attrs:{outlined:"",label:"Passwort einfügen",type:"password",rules:e.rules.delete,color:"error",required:""},model:{value:e.userProvidedPassword,callback:function(t){e.userProvidedPassword=t},expression:"userProvidedPassword"}}),e._v(" "),r("v-btn",{attrs:{color:"error",disabled:!e.deleteVal,loading:e.deleteLoading,type:"submit"}},[e._v("wirklich löschen")]),e._v(" "),r("v-btn",{on:{click:function(t){e.overlay=!e.overlay}}},[e._v("abbrechen")])],1)],1)],1)],1),e._v(" "),e.err.status&&!e.overlay?r("v-alert",{staticClass:"mt-4",attrs:{type:"error",color:"error"}},[e._v(e._s(e.err.msg))]):e._e(),e._v(" "),r("v-divider",{staticClass:"mt-8 pt-3"}),e._v(" "),r("p",{staticClass:"caption"},[e._v("\n      Bei Änderungswünschen gerne eine E-Mail an\n      "),r("a",{attrs:{href:"mailto:kontakt@sichere-zuflucht.de"}},[e._v("kontakt@sichere-zuflucht.de")])])],1):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;d()(component,{UtilsBanner:r(520).default}),d()(component,{VAlert:v.a,VBtn:f.a,VCard:h.a,VCardActions:_.a,VCardText:_.c,VCardTitle:_.d,VContainer:m.a,VDialog:w.a,VDivider:D.a,VForm:P.a,VTextField:x.a})},705:function(e,t,r){"use strict";r.r(t);var n=r(73),component=Object(n.a)({},(function(){var e=this.$createElement;return(this._self._c||e)("SharedProfilSettings")}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{SharedProfilSettings:r(586).default})}}]);
//# sourceMappingURL=31e6b92.js.map